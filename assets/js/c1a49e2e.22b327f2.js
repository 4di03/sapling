"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["9538"],{61079:function(e,n,r){r.r(n),r.d(n,{metadata:()=>t,contentTitle:()=>i,default:()=>a,assets:()=>o,toc:()=>l,frontMatter:()=>c});var t=JSON.parse('{"id":"commands/graft","title":"graft","description":"graft","source":"@site/docs/commands/graft.md","sourceDirName":"commands","slug":"/commands/graft","permalink":"/docs/commands/graft","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/sapling/tree/main/website/docs/commands/graft.md","tags":[],"version":"current","sidebarPosition":17,"frontMatter":{"sidebar_position":17},"sidebar":"tutorialSidebar","previous":{"title":"goto","permalink":"/docs/commands/goto"},"next":{"title":"help","permalink":"/docs/commands/help"}}'),s=r("85893"),d=r("50065");let c={sidebar_position:17},i=void 0,o={},l=[{value:"graft",id:"graft",level:2},{value:"arguments",id:"arguments",level:2}];function h(e){let n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"graft",children:"graft"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"copy commits from a different location"})}),"\n",(0,s.jsx)(n.p,{children:"Use Sapling's merge logic to copy individual commits from other\nlocations without making merge commits. This is sometimes known as\n'backporting' or 'cherry-picking'. By default, graft will also\ncopy user and description from the source commits. If you want to\nkeep the date of the source commits, you can add below config to your\nconfiguration file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"[tweakdefaults]\ngraftkeepdate = True\n"})}),"\n",(0,s.jsx)(n.p,{children:"Source commits will be skipped if they are ancestors of the\ncurrent commit, have already been grafted, or are merges."}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"--log"})," is specified, commit messages will have a comment appended\nof the form:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"(grafted from COMMITHASH)\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"--force"})," is specified, commits will be grafted even if they\nare already ancestors of, or have been grafted to, the destination.\nThis is useful when the commits have since been backed out."]}),"\n",(0,s.jsxs)(n.p,{children:["If a graft results in conflicts, the graft process is interrupted\nso that the current merge can be manually resolved. Once all\nconflicts are resolved, the graft process can be continued with\nthe ",(0,s.jsx)(n.code,{children:"-c/--continue"})," option."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"--from-path"})," and ",(0,s.jsx)(n.code,{children:"--to-path"})," allow copying commits between\ndirectories. Files in the grafted commit(s) outside of\n",(0,s.jsx)(n.code,{children:"--from-path"})," are ignored. See ",(0,s.jsx)(n.code,{children:"sl help directorybranching"})," for\nmore information."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"-c/--continue"})," operation does not remember options from\nthe original invocation, except for ",(0,s.jsx)(n.code,{children:"--force"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Examples:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"copy a single change to the stable branch and edit its description:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sl goto stable\nsl graft --edit ba7e89595\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"graft a range of changesets with one exception, updating dates:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:'sl graft -D "0e13e529c::224010e02 and not 85c0535a4"\n'})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"continue a graft after resolving conflicts:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sl graft -c\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"abort an interrupted graft:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sl graft --abort\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"show the source of a grafted changeset:"}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"sl log --debug -r .\n"})}),"\n",(0,s.jsxs)(n.p,{children:["See ",(0,s.jsx)(n.code,{children:"sl help revisions"})," for more about specifying revisions."]}),"\n",(0,s.jsx)(n.p,{children:"Returns 0 on success."}),"\n",(0,s.jsx)(n.h2,{id:"arguments",children:"arguments"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"shortname"}),(0,s.jsx)(n.th,{children:"fullname"}),(0,s.jsx)(n.th,{children:"default"}),(0,s.jsx)(n.th,{children:"description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-r"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--rev"})}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"revisions to graft"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-c"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--continue"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsx)(n.td,{children:"resume interrupted graft"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--abort"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsx)(n.td,{children:"abort an interrupted graft"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-e"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--edit"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsx)(n.td,{children:"invoke editor on commit messages"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--log"})}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"append graft info to log message"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-f"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--force"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsx)(n.td,{children:"force graft"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-D"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--currentdate"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsx)(n.td,{children:"record the current date as commit date"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-U"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--currentuser"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"false"})}),(0,s.jsx)(n.td,{children:"record the current user as committer"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-d"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--date"})}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"record the specified date as commit date"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-u"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--user"})}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"record the specified user as committer"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-t"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--tool"})}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"specify merge tool"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"-n"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"--dry-run"})}),(0,s.jsx)(n.td,{}),(0,s.jsx)(n.td,{children:"do not perform actions, just print output"})]})]})]})]})}function a(e={}){let{wrapper:n}={...(0,d.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},50065:function(e,n,r){r.d(n,{Z:function(){return i},a:function(){return c}});var t=r(67294);let s={},d=t.createContext(s);function c(e){let n=t.useContext(d);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),t.createElement(d.Provider,{value:n},e.children)}}}]);